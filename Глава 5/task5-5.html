<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // Задание 1
        function camelize(str) {
            return str.split('-').map(item => item ? (item[0].toUpperCase() + item.slice(1)) : '' ).join("");
        }

        alert(camelize("background-color")) // 'backgroundColor';
        alert(camelize("list-style-image")) // 'listStyleImage';
        alert(camelize("-webkit-transition")) // 'WebkitTransition';

        // Задание 2
        function filterRange(arr, min, max) { 
         return arr.slice().filter(item => item >= min && item <= max);
        }

        let arr = [5, 3, 8, 1];
        let filtered = filterRange(arr, 1, 4);
        alert( filtered ); // 3,1 (совпадающие значения)
        alert( arr ); // 5,3,8,1 (без изменений)

        // Задание 3
        function filterRangeInPlace(arr, min, max) { 
            for(let i = 0; i < arr.length; i++) {
                if(arr[i] < min || arr[i] > max) {
                    arr.splice(i, 1);
                }
            }
        }

        let arr1 = [5, 3, 8, 1];
        filterRangeInPlace(arr1, 1, 4); // удалены числа вне диапазона 1..4
        alert( arr1 ); // [3, 1]

        // Задание 4
        let arr2 = [5, 2, 1, -10, 8];
        arr2.sort((a, b) => b - a)

        alert( arr2 ); // 8, 5, 2, 1, -10

        // Задание 5
        function copySorted(arr) { 
            return arr.slice().sort();
        }

        let arr3 = ["HTML", "JavaScript", "CSS"];
        let sorted = copySorted(arr3);
        alert( sorted ); // CSS, HTML, JavaScript
        alert( arr3 ); // HTML, JavaScript, CSS (без изменений)

        // Задание 6
        function Calculator() {
            this.number1 = 0;
            this.number2 = 0;
            this.operations = {
                '+': (a, b) => a + b,
                '-': (a, b) => a - b,
            }
            this.calculate = function(str) {
                const opItems = str.split(' ');
                this.number1 = Number.isFinite(+opItems[0]) ? +opItems[0] : 0;
                this.number2 = Number.isFinite(+opItems[2]) ? +opItems[2] : 0;;
                return this.operations[opItems[1]](this.number1, this.number2);
            }
            this.addMethod = function(name, func) {
                this.operations[name] = func;
            }
        }

        let calc = new Calculator;
        alert(calc.calculate('3 + 7'));

        let powerCalc = new Calculator;
        powerCalc.addMethod("*", (a, b) => a * b);
        powerCalc.addMethod("/", (a, b) => a / b);
        powerCalc.addMethod("**", (a, b) => a ** b);

        let result = powerCalc.calculate("2 ** 3");
        alert( result ); // 8

        // Задание 7
        let vasya1 = { name: "Вася", age: 25 };
        let petya1 = { name: "Петя", age: 30 };
        let masha1 = { name: "Маша", age: 28 };

        let users1 = [ vasya1, petya1, masha1 ];
        let names = users1.map(user => user.name);

        alert( names ); // Вася, Петя, Маша

        // Задание 8
        let vasya2 = { name: "Вася", surname: "Пупкин", id: 1 };
        let petya2 = { name: "Петя", surname: "Иванов", id: 2 };
        let masha2 = { name: "Маша", surname: "Петрова", id: 3 };

        let users2 = [ vasya2, petya2, masha2 ];

        let usersMapped = users2.map(user => ({
            fullName: user.name + ' ' + user.surname,
            id: user.id
        }));

        alert( usersMapped[0].id ) // 1
        alert( usersMapped[0].fullName ) // Вася Пупкин

        // Задание 9
        function sortByAge(arr) {
            arr.sort((a, b) => a.age - b.age);
        }

        let vasya3 = { name: "Вася", age: 25 };
        let petya3 = { name: "Петя", age: 30 };
        let masha3 = { name: "Маша", age: 28 };

        let arr4 = [ vasya3, petya3, masha3 ];

        sortByAge(arr);

        // теперь: [vasya, masha, petya]
        alert(arr4[0].name); // Вася
        alert(arr4[1].name); // Маша
        alert(arr4[2].name); // Петя

        // Задание 10
        function shuffle(arr) {
            arr.sort((a, b) => a*Math.random() - b*Math.random())
        }

        let arr5 = [1, 2, 3];

        shuffle(arr5);
        alert(arr5);// arr = [3, 2, 1]
        shuffle(arr5);
        alert(arr5);// arr = [2, 1, 3]
        shuffle(arr5);
        alert(arr5);// arr = [3, 1, 2]

        // Задание 11
        function getAverageAge(arr) {
            return arr.reduce((sum, item) => sum + item.age, 0) / arr.length;
        }

        let vasya4 = { name: "Вася", age: 25 };
        let petya4 = { name: "Петя", age: 30 };
        let masha4 = { name: "Маша", age: 29 };

        let arr6 = [ vasya4, petya4, masha4 ];

        alert( getAverageAge(arr6) ); // (25 + 30 + 29) / 3 = 28

        //Задание 12
        function unique(arr) {
            const uniqueArray = [];
            for(let i = 0; i < arr.length; i++) {
                if(!uniqueArray.includes(arr[i])) uniqueArray.push(arr[i]);
            }
            return uniqueArray;
        }

        let strings = ["кришна", "кришна", "харе", "харе",
        "харе", "харе", "кришна", "кришна", ":-O"
        ];

        alert( unique(strings) ); // кришна, харе, :-O

        // Задание 13
        function groupById(arr) {
            const obj = {};
            for(let i = 0; i < arr.length; i++) {
                obj[arr[i].id] = arr[i];
            }
            return obj;
        }

        let users = [
            {id: 'john', name: "John Smith", age: 20},
            {id: 'ann', name: "Ann Smith", age: 24},
            {id: 'pete', name: "Pete Peterson", age: 31},
        ];
        let usersById = groupById(users);
        // после вызова у нас должно получиться:
        
        // usersById = {
        //     john: {id: 'john', name: "John Smith", age: 20},
        //     ann: {id: 'ann', name: "Ann Smith", age: 24},
        //     pete: {id: 'pete', name: "Pete Peterson", age: 31},
        // }

        alert(usersById.john.id) //john
        alert(usersById.ann.name) //Ann Smith
        alert(usersById.pete.age) //31
    </script>
</body>
</html>